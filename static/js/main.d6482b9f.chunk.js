(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(29).concat([function(e,t,c){},function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a=c(23),n=c.n(a),s=c(7),r=c(4),i=(c(29),c(3)),o=c(5),l=c.n(o),j=c(1),u=(c(30),c(0));function d(){var e=Object(j.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],n=Object(r.n)().pathname;return window.onscroll=function(){a(!0)},Object(j.useEffect)((function(){a(!1)}),[n.toString()]),Object(u.jsxs)("footer",{className:"page__footer footer",children:[Object(u.jsx)(s.b,{to:"home",className:"footer__logo logo"}),Object(u.jsxs)("div",{className:"footer__links",children:[Object(u.jsx)("a",{href:"https://github.com/",className:"footer__link",target:"_blank",rel:"noopener noreferrer",children:"Github"}),Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Contacts"}),Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Rights"})]}),Object(u.jsxs)("div",{className:l()("footer__button",{"footer__button--visible":c}),children:[Object(u.jsx)("label",{htmlFor:"back-to-top",className:"footer__button-label",children:"Back to top"}),Object(u.jsx)("button",{type:"button","aria-label":"back-to-top",id:"back-to-top",onClick:function(){return window.scroll(0,0)},className:"button button--back-to-top"})]})]})}var b=c(24),m=c(8);function p(e,t){var c=Object(j.useState)((function(){var c=localStorage.getItem(e);if(null===c)return t;try{return JSON.parse(c)}catch(a){return t}})),a=Object(i.a)(c,2),n=a[0],s=a[1];return[n,function(t){localStorage.setItem(e,JSON.stringify(t)),s(t)}]}var _={products:[],setProducts:function(){},favorites:[],setfavorites:function(){},addTofavoritesHandler:function(){},addedToCart:[],setAddedToCart:function(){},addToCartHandler:function(){},cartContentData:[],setCartContentData:function(){},totalPrices:0,setTotalPrices:function(){},isMenuActive:!1,setIsMenuActive:function(){},windowWidth:0},h=Object(j.createContext)(_),O=function(e){var t=e.children,c=Object(j.useState)([]),a=Object(i.a)(c,2),n=a[0],s=a[1],r=p("favorites",[]),o=Object(i.a)(r,2),l=o[0],d=o[1],b=p("addedToCart",[]),_=Object(i.a)(b,2),O=_[0],f=_[1],x=p("cartPrices",[{phoneId:"none",price:0,amount:0}]),v=Object(i.a)(x,2),g=v[0],N=v[1],y=p("totalPrices",0),C=Object(i.a)(y,2),k=C[0],w=C[1],I=Object(j.useState)(!1),S=Object(i.a)(I,2),A=S[0],T=S[1],E=Object(j.useState)(window.innerWidth),L=Object(i.a)(E,2),P=L[0],M=L[1];function R(e){if(l.find((function(t){return t.phoneId===e})))d(Object(m.a)(l).filter((function(t){return t.phoneId!==e})));else{var t=n.find((function(t){return t.phoneId===e}));t&&d([].concat(Object(m.a)(l),[t]))}}function D(e){if(O.find((function(t){return t.phoneId===e})))f(Object(m.a)(O).filter((function(t){return t.phoneId!==e}))),N(Object(m.a)(g).filter((function(t){return t.phoneId!==e}))),localStorage.removeItem("".concat(e,"amount"));else{var t=n.find((function(t){return t.phoneId===e}));t&&(f([].concat(Object(m.a)(O),[t])),N([].concat(Object(m.a)(g),[{phoneId:e,price:t.price,amount:1}])))}}Object(j.useEffect)((function(){var e=function(){M(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var W=Object(j.useMemo)((function(){return{products:n,setProducts:s,favorites:l,setfavorites:d,addTofavoritesHandler:R,addedToCart:O,setAddedToCart:f,addToCartHandler:D,cartContentData:g,setCartContentData:N,totalPrices:k,setTotalPrices:w,isMenuActive:A,setIsMenuActive:T,windowWidth:P}}),[l,O,n,k,A,P]);return Object(u.jsx)(h.Provider,{value:W,children:t})},f=640;c(33);function x(){var e=Object(j.useContext)(h).windowWidth;return Object(u.jsx)("nav",{className:"nav",children:Object(u.jsxs)("ul",{className:l()("nav__list",{"nav__list--aside":e<=960}),children:[Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"home",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Home"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"phones",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Phones"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"tablets",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Tablets"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"accessories",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Accessories"})}),e<=f&&Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"favorites",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Favorites"})}),e<=f&&Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(s.c,{to:"cart",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Cart"})})]})})}c(34);var v=["/phones","/tablets","/accessories","/favorites"];function g(){var e=Object(s.d)(),t=Object(i.a)(e,2),c=t[0],a=t[1],n=Object(j.useContext)(h),o=n.favorites,d=n.addedToCart,m=n.isMenuActive,p=n.setIsMenuActive,_=n.windowWidth,O=Object(r.n)(),g=Object(j.useState)(c.get("query")||""),N=Object(i.a)(g,2),y=N[0],C=N[1],k=Object(b.a)(y,500),w=Object(i.a)(k,1)[0];return Object(j.useEffect)((function(){var e;(e=w).trim()?c.set("query",e.trim()):c.delete("query"),a(c)}),[w]),Object(u.jsxs)("header",{className:"page__header header",children:[Object(u.jsx)("button",{className:l()("icon icon--menu",{"icon--menu--active":m}),type:"button","aria-label":"menu",onClick:function(){return p(!m)}}),Object(u.jsxs)("div",{className:"header__content",children:[Object(u.jsxs)("div",{className:"header__left",children:[Object(u.jsx)(s.b,{to:"home",className:"header__logo logo"}),Object(u.jsx)("div",{className:"header__nav",children:Object(u.jsx)(x,{})})]}),Object(u.jsxs)("div",{className:"header__right",children:[Object(u.jsxs)("div",{className:l()("header__input-container",{"header__input-container--active":v.includes(O.pathname)}),children:[Object(u.jsx)("input",{placeholder:"Search in phones...",className:"header__input",value:y,onChange:function(e){return C(e.target.value)}}),""===y?Object(u.jsx)("div",{className:"header__input-icon"}):Object(u.jsx)("button",{"aria-label":"clear",type:"button",className:"header__input-btn",onClick:function(){return C("")}})]}),_>=f&&Object(u.jsx)(s.c,{to:"favorites",className:function(e){var t=e.isActive;return l()("icon icon--fav",{"icon--active":t})},children:o.length>0&&Object(u.jsx)("div",{className:"counter",children:o.length})}),_>=f&&Object(u.jsx)(s.c,{to:"cart",className:function(e){var t=e.isActive;return l()("icon icon--cart",{"icon--active":t})},children:d.length>0&&Object(u.jsx)("div",{className:"counter",children:d.length})})]})]})]})}c(35);function N(){var e=Object(j.useContext)(h),t=e.isMenuActive,c=e.setIsMenuActive,a=e.windowWidth,n=Object(r.n)().pathname,s=Object(j.useState)(window.scrollY),o=Object(i.a)(s,2),d=o[0],b=o[1],m=function(){b(window.scrollY)};Object(j.useEffect)((function(){return window.addEventListener("scroll",m),function(){window.removeEventListener("scroll",m)}}),[]),Object(j.useEffect)((function(){c(!1)}),[a,n]),Object(j.useEffect)((function(){document.body.style.overflow=t?"hidden":"unset"}),[t]);var p={top:"".concat(d,"px")};return Object(u.jsx)("aside",{className:l()("menu",{"menu--active":t}),style:p,children:Object(u.jsx)(x,{})})}var y=function(){return Object(u.jsxs)("div",{className:"page__app",id:"app",children:[Object(u.jsx)(g,{}),Object(u.jsx)(N,{}),Object(u.jsx)("main",{className:"page__main main",children:Object(u.jsx)(r.a,{})}),Object(u.jsx)(d,{})]})};function C(){var e=Object(r.n)().pathname;return Object(j.useEffect)((function(){window.scrollTo(0,0)}),[e.toString()]),null}c(36);var k=function(e){var t=e.product,c=Object(j.useContext)(h),a=c.cartContentData,n=c.setCartContentData,r=c.addedToCart,o=c.setTotalPrices,d=c.addToCartHandler,b=p("".concat(t.phoneId,"amount"),1),_=Object(i.a)(b,2),O=_[0],f=_[1];return Object(j.useEffect)((function(){var e=a.find((function(e){return e.phoneId===t.phoneId}));if(e){var c=Object(m.a)(a),s=c.indexOf(e);c[s].amount=O,n(c)}else{var r=[].concat(Object(m.a)(a),[{phoneId:t.phoneId,price:t.price,amount:O}]);n(r)}var i=a.map((function(e){return e.price*e.amount})).reduce((function(e,t){return e+t}),0);o(i)}),[O,r]),Object(u.jsxs)("article",{className:"cart-item",children:[Object(u.jsxs)("div",{className:"cart-item__left",children:[Object(u.jsx)("button",{"aria-label":"remove item",type:"button",className:"cart-item__remove-btn",onClick:function(){return d(t.phoneId)},"data-cy":"cartDeleteButton"}),Object(u.jsx)("div",{className:"cart-item__img-container",children:Object(u.jsx)("img",{src:t.image,alt:t.name,className:"cart-item__img"})}),Object(u.jsx)(s.b,{to:"/".concat(t.category,"/").concat(t.itemId),className:"cart-item__item-link",children:Object(u.jsx)("p",{className:"cart-item__name",children:t.name})})]}),Object(u.jsxs)("div",{className:"cart-item__right",children:[Object(u.jsxs)("div",{className:"cart-item__change-amount",children:[Object(u.jsx)("button",{"aria-label":"decrease amount",type:"button",className:l()("cart-item__btn cart-item__btn--min",{"cart-item__btn--min--disabled":1===O}),onClick:function(){return f(O-1)}}),Object(u.jsx)("p",{className:"cart-item__amount","data-cy":"productQauntity",children:O}),Object(u.jsx)("button",{"aria-label":"increase amount",type:"button",className:"cart-item__btn cart-item__btn--plus",onClick:function(){return f(O+1)}})]}),Object(u.jsx)("p",{className:"cart-item__price",children:"$".concat(t.price*O)})]})]})};c(37);function w(){var e=Object(r.p)(),t=Object(r.n)(),c=t.state,a=t.pathname.split("/")[1];return Object(u.jsxs)("button",{"aria-label":"Go back",type:"button",className:"go-back-button",onClick:function(){return e({pathname:"..",search:null===c||void 0===c?void 0:c.search})},"data-cy":"backButton",children:[Object(u.jsx)("span",{className:"go-back-button__arrow"}),"Back ".concat("cart"!==a?"to ".concat(a):"")]})}c(38);function I(){var e=Object(j.useContext)(h),t=e.addedToCart,c=e.cartContentData,a=e.setCartContentData,n=e.totalPrices,s=Object(j.useState)(!1),r=Object(i.a)(s,2),o=r[0],d=r[1],b=Object(j.useCallback)((function(){d(!0);var e=setTimeout((function(){return d(!1)}),4e3);return function(){return clearTimeout(e)}}),[]);Object(j.useEffect)((function(){var e=t.map((function(e){var t=localStorage.getItem("".concat(e.phoneId,"amount"));return{phoneId:e.phoneId,price:e.price,amount:t?+t:1}}));a(e)}),[t]);var m=c.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{}),Object(u.jsxs)("section",{className:"cart",children:[Object(u.jsx)("h1",{className:"cart__title",children:"Cart"}),0===t.length?Object(u.jsx)("p",{className:"cart__empty",children:"Your cart is empty"}):Object(u.jsxs)("div",{className:"cart__container",children:[Object(u.jsx)("div",{className:"cart__chosen-items",children:t.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(k,{product:e})},e.phoneId)}))}),Object(u.jsxs)("div",{className:"cart__total",children:[Object(u.jsxs)("div",{className:"cart__price-container",children:[Object(u.jsx)("p",{className:"cart__price",children:"$".concat(n)}),Object(u.jsx)("p",{className:"cart__price-description",children:"Total for ".concat(m," items")})]}),Object(u.jsx)("button",{type:"button",className:"wide-button wide-button--high",onClick:function(){return b()},children:"Checkout"}),Object(u.jsx)("p",{className:l()("cart__message",{"cart__message--active":o}),children:"We are sorry, but this feature is not implemented yet"})]})]})]})]})}c(39);function S(){return Object(u.jsx)("div",{className:"error-page",children:"Page not found... "})}c(40);var A=function(){var e=Object(r.n)(),t="",c=e.pathname.split("/").filter((function(e){return""!==e})).map((function(e){t+="/".concat(e);var c=e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");return Object(u.jsxs)("div",{className:"breadcrumbs__crumb","data-cy":"breadCrumbs",children:[Object(u.jsx)("div",{className:"breadcrumbs__separator"}),Object(u.jsx)(s.c,{to:t,className:"breadcrumbs__link",children:c})]},e)}));return Object(u.jsxs)("div",{className:"breadcrumbs",children:[Object(u.jsx)(s.c,{to:"/home",className:"breadcrumbs__home"}),c]})},T=(c(41),function(e){var t=e.product,c=Object(j.useContext)(h),a=c.addTofavoritesHandler,n=c.addToCartHandler,r=c.addedToCart,o=c.favorites,d=Object(s.d)(),b=Object(i.a)(d,1)[0],m=r.find((function(e){return e.phoneId===t.phoneId})),p=o.find((function(e){return e.phoneId===t.phoneId}));return Object(u.jsxs)("article",{className:"product-card",children:[Object(u.jsx)("div",{className:"product-card__img-container",children:Object(u.jsx)(s.b,{to:"/".concat(t.category,"/").concat(t.itemId),state:{search:b.toString()},className:"product-card__img-link",children:Object(u.jsx)("img",{src:t.image,alt:t.name,className:"product-card__img"})})}),Object(u.jsx)(s.b,{to:"/".concat(t.category,"/").concat(t.itemId),className:"product-card__title-link",state:{search:b.toString()},children:Object(u.jsx)("h2",{className:"product-card__title",children:t.name})}),Object(u.jsxs)("p",{className:"product-cars__prices",children:[Object(u.jsx)("span",{className:"product-card__price",children:"$".concat(t.price)}),Object(u.jsx)("span",{className:"product-card__full-price",children:"$".concat(t.fullPrice)})]}),Object(u.jsxs)("ul",{className:"product-card__list",children:[Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"Screen"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.screen})]}),Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"Capacity"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.capacity})]}),Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"RAM"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.ram})]})]}),Object(u.jsxs)("div",{className:"product-card__buttons",children:[Object(u.jsx)("button",{type:"button",className:l()("wide-button",{"wide-button--active":m}),onClick:function(){return n(t.phoneId)},children:m?"Added to Cart":"Add to cart"}),Object(u.jsx)("button",{type:"button","aria-label":"button-fav",className:l()("button button--fav",{"button--fav--chosen":p}),onClick:function(){return a(t.phoneId)},"data-cy":"addToFavorite"})]})]})}),E=(c(42),function(e){var t=e.productsList;return Object(u.jsx)("ul",{className:"product-list","data-cy":"productList",children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(T,{product:e})},e.id)}))})});function L(){var e=Object(j.useContext)(h).favorites;return Object(u.jsxs)("div",{className:"outlet",children:[Object(u.jsx)(A,{}),Object(u.jsxs)("section",{className:"outlet__content",children:[Object(u.jsx)("h1",{className:"outlet__title",children:"Favorites"}),Object(u.jsx)("p",{className:"outlet__subtitle",children:"".concat(e.length," items")}),Object(u.jsx)(E,{productsList:e})]})]})}c(43);var P=[{name:"phones",url:"/phones",img:"./img/banner-phones.png"},{name:"tablets",url:"/tablets",img:"./img/banner-tablets.png"},{name:"accessories",url:"/accessories",img:"./img/banner-accessories.png"}];function M(){var e=Object(j.useState)(0),t=Object(i.a)(e,2),c=t[0],a=t[1],n=Object(j.useState)(1040),r=Object(i.a)(n,2),o=r[0],d=r[1],b=Object(j.useRef)(null),m=Object(j.useRef)(null);function p(){c===P.length-1?a(0):a((function(e){return e+1}))}Object(j.useEffect)((function(){var e=function(){m.current&&d(m.current.offsetWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(j.useEffect)((function(){d(m.current?m.current.offsetWidth:0);var e=o*c;b.current&&(b.current.style.transform="translateX(-".concat(e,"px)"))}),[c,o]);var _={width:o};return Object(j.useEffect)((function(){var e=setInterval((function(){p()}),4e3);return function(){return clearInterval(e)}}),[c]),Object(u.jsxs)("div",{className:"slider",children:[Object(u.jsxs)("div",{className:"slider__top",children:[Object(u.jsx)("button",{type:"button",className:"slider__button slider__button--prev","aria-label":"prev",onClick:function(){a(0===c?P.length-1:function(e){return e-1})}}),Object(u.jsx)("div",{className:"slider__viewport",ref:m,children:Object(u.jsx)("div",{className:"slider__links",ref:b,children:P.map((function(e){return Object(u.jsx)(s.b,{className:"slider__link slider__link--".concat(e.name),style:_,to:e.url},e.name)}))})}),Object(u.jsx)("button",{type:"button",className:"slider__button slider__button--next","aria-label":"next",onClick:p})]}),Object(u.jsxs)("div",{className:"slider__dots",children:[Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":0===c}),onClick:function(){return a(0)}}),Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":1===c}),onClick:function(){return a(1)}}),Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":2===c}),onClick:function(){return a(2)}})]})]})}c(44);var R=function(){return Object(u.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(u.jsx)("div",{className:"Loader__content"})})},D=(c(45),function(e){var t=e.title,c=e.products,a=Object(j.useState)(0),n=Object(i.a)(a,2),s=n[0],r=n[1],o=Object(j.useState)(!1),d=Object(i.a)(o,2),b=d[0],m=d[1],p=Object(j.useState)(!1),_=Object(i.a)(p,2),h=_[0],O=_[1],f=Object(j.useRef)(null);return Object(j.useEffect)((function(){0===s&&m(!0),s===c.length-1-4&&O(!0);var e=288*s;f.current&&(f.current.style.transform="translateX(-".concat(e,"px)"))}),[s]),Object(u.jsxs)("div",{className:"products-slider",children:[Object(u.jsxs)("div",{className:"products-slider__top",children:[Object(u.jsx)("h1",{className:"products-slider__title",children:t}),Object(u.jsxs)("div",{className:"products-slider__buttons",children:[Object(u.jsx)("button",{"aria-label":"prev",type:"button",className:l()("button button--prev",{"button--disabled":b}),onClick:function(){O(!1),r((function(e){return e-1}))}}),Object(u.jsx)("button",{"aria-label":"next",type:"button",className:l()("button button--next",{"button--disabled":h}),onClick:function(){m(!1),s===c.length-1-4?O(!0):r((function(e){return e+1}))}})]})]}),Object(u.jsx)("div",{className:"products-slider__viewport",children:Object(u.jsx)("div",{className:"products-slider__items",ref:f,"data-cy":"cardsContainer",children:c.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(T,{product:e})},e.id)}))})})]})}),W="https://mate-academy.github.io/react_phone-catalog/_new";function H(){return fetch("".concat(W,"/products.json")).then((function(e){return e.json()}))}c(46);function B(){var e=Object(j.useContext)(h),t=e.products,c=e.setProducts,a=Object(j.useState)([]),n=Object(i.a)(a,2),s=n[0],r=n[1],o=Object(j.useState)([]),l=Object(i.a)(o,2),d=l[0],b=l[1],m=Object(j.useState)(!1),p=Object(i.a)(m,2),_=p[0],O=p[1];return Object(j.useEffect)((function(){O(!0),H().then(c),H().then((function(e){return e.sort((function(e,t){return e.fullPrice-e.price-(t.fullPrice-t.price)}))})).then(r),H().then((function(e){return e.sort((function(e,t){return t.price-e.price}))})).then(b).finally((function(){return O(!1)}))}),[]),Object(u.jsx)("div",{className:"home-page",children:_?Object(u.jsx)(R,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("section",{className:"home-page__section",children:Object(u.jsx)(M,{})}),Object(u.jsx)("section",{className:"home-page__section hot-prices",children:Object(u.jsx)(D,{title:"Hot prices",products:s})}),Object(u.jsxs)("section",{className:"home-page__section categories",children:[Object(u.jsx)("h1",{className:"categories__title",children:"Shop by category"}),Object(u.jsxs)("div",{className:"categories__content","data-cy":"categoryLinksContainer",children:[Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/phones.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Mobile phones"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"phones"===e.category})).length," models")})]}),Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/tabs.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Tablets"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"tablets"===e.category})).length," models")})]}),Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/accessories.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Accessories"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"accessories"===e.category})).length," models")})]})]})]}),Object(u.jsx)("section",{className:"home-page__section new-models",children:Object(u.jsx)(D,{title:"Brand new models",products:d})})]})})}c(47);var F=function(e){var t=e.images,c=Object(j.useState)(t[0]),a=Object(i.a)(c,2),n=a[0],s=a[1];return Object(j.useEffect)((function(){s(t[0])}),[t]),Object(u.jsxs)("div",{className:"item-gallery",children:[Object(u.jsx)("ul",{className:"item-gallery__list",children:t.map((function(e){return Object(u.jsx)("li",{className:"item-gallery__li",children:Object(u.jsx)("button",{type:"button",onClick:function(){return s(e)},className:l()("item-gallery__previw-btn",{"item-gallery__previw-btn--active":e===n}),children:Object(u.jsx)("img",{src:e,alt:"product",className:"item-gallery__previw-img"})})},e)}))}),Object(u.jsx)("div",{className:"item-gallery__img-container",children:Object(u.jsx)("img",{src:n,alt:"product",className:"item-gallery__img"})})]})};c(48);function $(){var e=Object(r.r)().itemId,t=Object(j.useContext)(h),c=t.addTofavoritesHandler,a=t.addToCartHandler,n=t.addedToCart,o=t.favorites,d=Object(j.useState)(),b=Object(i.a)(d,2),m=b[0],p=b[1],_=Object(j.useState)([]),O=Object(i.a)(_,2),f=O[0],x=O[1],v=Object(j.useState)(!1),g=Object(i.a)(v,2),N=g[0],y=g[1],C=Object(j.useState)(""),k=Object(i.a)(C,2),I=k[0],S=k[1],T=Object(j.useState)(""),E=Object(i.a)(T,2),L=E[0],P=E[1],M=Object(r.n)(),B=Object(r.n)().state,$=n.find((function(t){return t.phoneId===e})),z=o.find((function(t){return t.phoneId===e}));Object(j.useEffect)((function(){var t;y(!0),(t=e,fetch("".concat(W,"/products/").concat(t,".json")).then((function(e){return e.json()})).then()).then(p).finally((function(){return y(!1)})),H().then((function(e){return e.sort((function(){return.5-Math.random()}))})).then(x)}),[e]),Object(j.useEffect)((function(){m&&(S(m.color),P(m.capacity))}),[m]);var q=function(e,t){var c=M.pathname.split("-");switch(e){case"color":c.splice(-1,1,t);break;case"capacity":c.splice(-2,1,t.toLowerCase())}return c.join("-")};return N?Object(u.jsx)(R,{}):Object(u.jsxs)("div",{className:"item-page",children:[Object(u.jsx)(A,{}),Object(u.jsx)(w,{}),m?Object(u.jsxs)("div",{className:"item-page__content",children:[Object(u.jsxs)("section",{className:"item-page__section",children:[Object(u.jsx)("h1",{className:"item-page__title",children:m.name}),Object(u.jsxs)("div",{className:"item-page__flex-container",children:[Object(u.jsx)(F,{images:m.images}),Object(u.jsxs)("div",{className:"item-page__main-info",children:[Object(u.jsxs)("div",{className:"item-page__info-container",children:[Object(u.jsxs)("div",{className:"item-page__specifications",children:[Object(u.jsxs)("div",{className:"item-page__info-block",children:[Object(u.jsx)("p",{className:"item-page__caption",children:"Available colors"}),Object(u.jsx)("ul",{className:"item-page__spec-container",children:m.colorsAvailable.map((function(e){var t="rosegold"===e?"#ffe5e4":e;return Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:q("color",e),state:{search:null===B||void 0===B?void 0:B.search},className:l()("item-page__color",{"item-page__color--active":I===e}),title:e,style:{backgroundColor:t},onClick:function(){return S(e)}})},e)}))})]}),Object(u.jsx)("div",{className:"item-page__separator"}),Object(u.jsxs)("div",{className:"item-page__info-block",children:[Object(u.jsx)("p",{className:"item-page__caption",children:"Select capacity"}),Object(u.jsx)("ul",{className:"item-page__spec-container",children:m.capacityAvailable.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:q("capacity",e),state:{search:null===B||void 0===B?void 0:B.search},className:l()("item-page__capacity",{"item-page__capacity--active":L===e}),onClick:function(){return P(e)},children:e})},e)}))})]}),Object(u.jsx)("div",{className:"item-page__separator"})]}),Object(u.jsxs)("p",{className:"item-page__price",children:["$".concat(m.priceDiscount),Object(u.jsx)("span",{className:"item-page__price--old",children:"$".concat(m.priceRegular)})]}),Object(u.jsxs)("div",{className:"item-page__add-to-cart",children:[Object(u.jsx)("button",{type:"button","aria-label":"Add to cart",className:l()("wide-button wide-button--high",{"wide-button--active":$}),onClick:function(){return a(m.id)},children:$?"Added to Cart":"Add to cart"}),Object(u.jsx)("button",{type:"button","aria-label":"Add to favorites",className:l()("button button--fav button--fav--big",{"button--fav--chosen":z}),onClick:function(){return c(m.id)},"data-cy":"addToFavorite"})]}),Object(u.jsxs)("ul",{className:"item-page__props-list",children:[Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Screen"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.screen})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Resolution"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.resolution})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Processor"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.processor})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"RAM"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.ram})]})]})]}),Object(u.jsx)("p",{className:"item-page__id",children:"ID: 802390"})]})]})]}),Object(u.jsxs)("div",{className:"item-page__flex-container",children:[Object(u.jsx)("section",{className:"item-page__section",children:Object(u.jsxs)("div",{className:"item-page__about","data-cy":"productDescription",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"item-page__section-title",children:"About"}),Object(u.jsx)("div",{className:"item-page__separator"})]}),m.description.map((function(e){return Object(u.jsxs)("article",{className:"item-page__about-article",children:[Object(u.jsx)("h3",{className:"item-page__article-title",children:e.title}),e.text.map((function(e){return Object(u.jsx)("p",{className:"item-page__article-p",children:e})}))]})}))]})}),Object(u.jsxs)("section",{className:"item-page__section",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"item-page__section-title",children:"Tech specs"}),Object(u.jsx)("div",{className:"item-page__separator"})]}),Object(u.jsxs)("ul",{className:"item-page__tech-specs",children:[Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Screen",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.screen})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Resolution",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.resolution})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Processor",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.processor})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["RAM",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.ram})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Built in memory",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.capacity})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Camera",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.camera})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Zoom",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.zoom})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Cell",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.cell.join(", ")})]})]})]})]})]}):Object(u.jsx)("p",{className:"item-page__not-found",children:"No products found..."}),Object(u.jsx)(D,{title:"You may also like",products:f})]})}c(49);var z,q=function(e){var t=e.label,c=e.property,a=e.searchName,n=e.setSearchWith,s=e.propertyList,r=Object(j.useRef)(null),i=Object(j.useRef)(null);return Object(u.jsxs)("div",{className:"select__wrapper",children:[Object(u.jsx)("p",{className:"select__label",children:t}),Object(u.jsx)("button",{ref:i,type:"button","aria-label":"select-button",name:"sortBy",id:"sortBy",className:"select__button",onClick:function(){var e,t;r&&(null===(e=r.current)||void 0===e||e.classList.toggle("select__dropdown--visible"));i&&(null===(t=i.current)||void 0===t||t.classList.toggle("select__button--active"))},onBlur:function(){var e,t;r&&(null===(e=r.current)||void 0===e||e.classList.remove("select__dropdown--visible"));i&&(null===(t=i.current)||void 0===t||t.classList.remove("select__button--active"))},children:c}),Object(u.jsx)("ul",{className:"select__dropdown",ref:r,children:s.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("button",{type:"button",className:"select__option",onMouseDown:function(){return n(a,e)},children:e})},e)}))})]})};c(50);!function(e){e.age="Newest",e.name="Alphabetically",e.price="Cheapest"}(z||(z={}));var J=[4,8,16,"all"],Y=function(e){var t=e.products,c=e.setProductsCounter,a=Object(s.d)(),n=Object(i.a)(a,2),r=n[0],o=n[1],d=+(r.get("page")||1),b=r.get("sort")||z.age,p=r.get("perPage")||J[2],_=r.get("query")||"",h="all"!==p?+p*d:t.length,O="all"!==p?h-+p:1,f=function(e,t){var c=new URLSearchParams(r);c.set(e,t.toString()),o(c)};Object(j.useMemo)((function(){f("page",1)}),[p,b]);var x=Object(m.a)(t).filter((function(e){return e.name.toLowerCase().includes(_.toLowerCase())})),v=function(e){var t=Object(m.a)(e);switch(b){case z.age:t.sort((function(e,t){return t.year-e.year}));break;case z.name:t.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case z.price:t.sort((function(e,t){return e.price-t.price}))}return t.slice(O,h)}(x),g=function(){var e="all"!==p?Math.ceil(x.length/+p):1,t=[1,d-1,d,d+1,e];if(1!==d&&2!==d||(t=[1,2,3,4,e]),d!==e&&d!==e-1||(t=[1,e-3,e-2,e-1,e]),e<5){t=[];for(var c=1;c<=e;c+=1)t.push(c)}return t};return Object(j.useEffect)((function(){c(x.length)}),[x]),Object(u.jsx)("div",{className:"catalog",children:0===x.length?Object(u.jsx)("p",{children:"No products found"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"catalog__filters",children:[Object(u.jsx)(q,{label:"Sort by",property:b,searchName:"sort",setSearchWith:f,propertyList:Object.values(z)}),Object(u.jsx)(q,{label:"Items on page",property:p,searchName:"perPage",setSearchWith:f,propertyList:J})]}),Object(u.jsx)("div",{className:"catalog__product-list",children:Object(u.jsx)(E,{productsList:v})}),"all"!==p&&Object(u.jsxs)("div",{className:"catalog__pages-nav","data-cy":"pagination",children:[Object(u.jsx)("button",{"aria-label":"prev",type:"button",className:l()("button button--prev",{"button--disabled":1===d}),"data-cy":"paginationLeft",onClick:function(){return f("page",d-1)}}),Object(u.jsx)("div",{className:"catalog__pages-buttons",children:g().map((function(e){return Object(u.jsx)("button",{"aria-label":"page",type:"button",className:l()("catalog__page-button",{"catalog__page-button--active":e===d}),onClick:function(){return f("page",e)},children:e},e)}))}),Object(u.jsx)("button",{"aria-label":"next",type:"button",className:l()("button button--next",{"button--disabled":d===g().length}),"data-cy":"paginationRight",onClick:function(){return f("page",d+1)}})]})]})})},G=function(e){var t=e.category,c=e.title,a=Object(j.useState)([]),n=Object(i.a)(a,2),s=n[0],o=n[1],l=Object(j.useState)(s.length),d=Object(i.a)(l,2),b=d[0],m=d[1],p=Object(r.n)(),_=Object(j.useState)(!1),h=Object(i.a)(_,2),O=h[0],f=h[1];return Object(j.useEffect)((function(){f(!0),function(e){return H().then((function(t){return t.filter((function(t){return t.category===e}))}))}(t).then(o).finally((function(){return f(!1)}))}),[p.pathname]),Object(u.jsxs)("div",{className:"outlet",children:[Object(u.jsx)(A,{}),O?Object(u.jsx)(R,{}):Object(u.jsxs)("section",{className:"outlet__content",children:[Object(u.jsx)("h1",{className:"outlet__title",children:c}),Object(u.jsx)("p",{className:"outlet__subtitle",children:"".concat(b," ").concat(1===b?"model":"models")}),Object(u.jsx)("div",{className:"outlet__catalog",children:Object(u.jsx)(Y,{products:s,setProductsCounter:m})})]})]})};function U(){return Object(u.jsx)(O,{children:Object(u.jsxs)(s.a,{children:[Object(u.jsx)(C,{}),Object(u.jsx)(r.d,{children:Object(u.jsxs)(r.b,{path:"/",element:Object(u.jsx)(y,{}),children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(B,{})}),Object(u.jsx)(r.b,{path:"home",element:Object(u.jsx)(B,{})}),Object(u.jsxs)(r.b,{path:"phones",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(G,{category:"phones",title:"Mobile phones"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)($,{})})]}),Object(u.jsxs)(r.b,{path:"tablets",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(G,{category:"tablets",title:"Tablets"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)($,{})})]}),Object(u.jsxs)(r.b,{path:"accessories",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(G,{category:"accessories",title:"Accessories"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)($,{})})]}),Object(u.jsx)(r.b,{path:"favorites",element:Object(u.jsx)(L,{})}),Object(u.jsx)(r.b,{path:"cart",element:Object(u.jsx)(I,{})}),Object(u.jsx)(r.b,{path:"*",element:Object(u.jsx)(S,{})})]})})]})})}c(51);n.a.render(Object(u.jsx)(U,{}),document.getElementById("root"))}]),[[52,1,2]]]);
//# sourceMappingURL=main.d6482b9f.chunk.js.map