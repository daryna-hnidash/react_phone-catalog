(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(29).concat([function(e,t,c){},function(e,t,c){},,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a=c(23),s=c.n(a),n=c(7),r=c(4),i=(c(29),c(3)),o=c(6),l=c.n(o),j=c(1),u=(c(30),c(0));function b(){var e=Object(j.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(r.n)().pathname;return window.onscroll=function(){a(!0)},Object(j.useEffect)((function(){a(!1)}),[s.toString()]),Object(u.jsxs)("footer",{className:"page__footer footer",children:[Object(u.jsx)(n.b,{to:"home",className:"footer__logo logo"}),Object(u.jsxs)("div",{className:"footer__links",children:[Object(u.jsx)("a",{href:"https://github.com/",className:"footer__link",target:"_blank",rel:"noopener noreferrer",children:"Github"}),Object(u.jsx)("a",{href:"/",className:"footer__link",children:"Contacts"}),Object(u.jsx)("a",{href:"/",className:"footer__link",children:"Rights"})]}),Object(u.jsxs)("div",{className:l()("footer__button",{"footer__button--visible":c}),children:[Object(u.jsx)("label",{htmlFor:"back-to-top",className:"footer__button-label",children:"Back to top"}),Object(u.jsx)("button",{type:"button","aria-label":"back-to-top",id:"back-to-top",onClick:function(){return window.scroll(0,0)},className:"button button--back-to-top"})]})]})}var d=c(24),m=c(8);function p(e,t){var c=Object(j.useState)((function(){var c=localStorage.getItem(e);if(null===c)return t;try{return JSON.parse(c)}catch(a){return t}})),a=Object(i.a)(c,2),s=a[0],n=a[1];return[s,function(t){localStorage.setItem(e,JSON.stringify(t)),n(t)}]}var h="https://mate-academy.github.io/react_phone-catalog/_new";function _(){return fetch("".concat(h,"/products.json")).then((function(e){return e.json()}))}var O={products:[],setProducts:function(){},favorites:[],setfavorites:function(){},addTofavoritesHandler:function(){},addedToCart:[],setAddedToCart:function(){},addToCartHandler:function(){},cartPrices:[],setCartPrices:function(){},totalPrices:0,setTotalPrices:function(){}},x=Object(j.createContext)(O),f=function(e){var t=e.children,c=Object(j.useState)([]),a=Object(i.a)(c,2),s=a[0],n=a[1],r=p("favorites",[]),o=Object(i.a)(r,2),l=o[0],b=o[1],d=p("addedToCart",[]),h=Object(i.a)(d,2),O=h[0],f=h[1],v=p("cartPrices",[{phoneId:"none",price:0,amount:0}]),g=Object(i.a)(v,2),N=g[0],y=g[1],C=p("totalPrices",0),k=Object(i.a)(C,2),w=k[0],S=k[1];function I(e){if(l.find((function(t){return t.phoneId===e})))b(Object(m.a)(l).filter((function(t){return t.phoneId!==e})));else{var t=s.find((function(t){return t.phoneId===e}));t&&b([].concat(Object(m.a)(l),[t]))}}function P(e){if(O.find((function(t){return t.phoneId===e})))f(Object(m.a)(O).filter((function(t){return t.phoneId!==e}))),y(Object(m.a)(N).filter((function(t){return t.phoneId!==e}))),localStorage.removeItem("".concat(e,"amount"));else{var t=s.find((function(t){return t.phoneId===e}));t&&(f([].concat(Object(m.a)(O),[t])),y([].concat(Object(m.a)(N),[{phoneId:e,price:t.price,amount:1}])))}}Object(j.useEffect)((function(){_().then(n)}));var T=Object(j.useMemo)((function(){return{products:s,setProducts:n,favorites:l,setfavorites:b,addTofavoritesHandler:I,addedToCart:O,setAddedToCart:f,addToCartHandler:P,cartPrices:N,setCartPrices:y,totalPrices:w,setTotalPrices:S}}),[l,O,s,w]);return Object(u.jsx)(x.Provider,{value:T,children:t})};c(35);function v(){return Object(u.jsx)("nav",{className:"header__nav nav",children:Object(u.jsxs)("ul",{className:"nav__list",children:[Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(n.c,{to:"home",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Home"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(n.c,{to:"phones",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Phones"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(n.c,{to:"tablets",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Tablets"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(n.c,{to:"accessories",className:function(e){var t=e.isActive;return l()("nav__link",{"nav__link--is-active":t})},children:"Accessories"})})]})})}c(36);var g=["/phones","/tablets","/accessories","/favorites"];function N(){var e=Object(n.d)(),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(j.useContext)(x),o=s.favorites,b=s.addedToCart,m=Object(r.n)(),p=Object(j.useState)(c.get("query")||""),h=Object(i.a)(p,2),_=h[0],O=h[1],f=Object(j.useCallback)(Object(d.debounce)((function(e){var t=new URLSearchParams(c);""===e?t.delete("query"):t.set("query",e.trim()),a(t)}),1),[]),N=function(e){O(e),f(e)};return Object(u.jsxs)("header",{className:"page__header header",children:[Object(u.jsxs)("div",{className:"header__left",children:[Object(u.jsx)(n.b,{to:"home",className:"header__logo logo"}),Object(u.jsx)(v,{})]}),Object(u.jsxs)("div",{className:"header__right",children:[Object(u.jsxs)("div",{className:l()("header__input-container",{"header__input-container--active":g.includes(m.pathname)}),children:[Object(u.jsx)("input",{placeholder:"Search in phones...",className:"header__input",value:_,onChange:function(e){return N(e.target.value)}}),""===_?Object(u.jsx)("div",{className:"header__input-icon"}):Object(u.jsx)("button",{"aria-label":"clear",type:"button",className:"header__input-btn",onClick:function(){return N("")}})]}),Object(u.jsx)(n.c,{to:"favorites",className:function(e){var t=e.isActive;return l()("icon icon--fav",{"icon--active":t})},children:o.length>0&&Object(u.jsx)("div",{className:"counter",children:o.length})}),Object(u.jsx)(n.c,{to:"cart",className:function(e){var t=e.isActive;return l()("icon icon--cart",{"icon--active":t})},children:b.length>0&&Object(u.jsx)("div",{className:"counter",children:b.length})})]})]})}var y=function(){return Object(u.jsxs)("div",{className:"page__app",id:"app",children:[Object(u.jsx)(N,{}),Object(u.jsx)("main",{className:"page__main main",children:Object(u.jsx)(r.a,{})}),Object(u.jsx)(b,{})]})};function C(){var e=Object(r.n)().pathname;return Object(j.useEffect)((function(){window.scrollTo(0,0)}),[e.toString()]),null}c(37);var k=function(e){var t=e.product,c=Object(j.useContext)(x),a=c.cartPrices,s=c.setCartPrices,r=c.addedToCart,o=c.setTotalPrices,b=c.addToCartHandler,d=p("".concat(t.phoneId,"amount"),1),h=Object(i.a)(d,2),_=h[0],O=h[1];return Object(j.useEffect)((function(){var e=a.find((function(e){return e.phoneId===t.phoneId}));if(e){var c=Object(m.a)(a),n=c.indexOf(e);c[n].amount=_,s(c)}else{var r=[].concat(Object(m.a)(a),[{phoneId:t.phoneId,price:t.price,amount:_}]);s(r)}var i=a.map((function(e){return e.price*e.amount})).reduce((function(e,t){return e+t}),0);o(i)}),[_,r]),Object(u.jsxs)("article",{className:"cart-item",children:[Object(u.jsxs)("div",{className:"cart-item__right",children:[Object(u.jsx)("button",{"aria-label":"remove item",type:"button",className:"cart-item__remove-btn",onClick:function(){return b(t.phoneId)},"data-cy":"cartDeleteButton"}),Object(u.jsx)("div",{className:"cart-item__img-container",children:Object(u.jsx)("img",{src:t.image,alt:t.name,className:"cart-item__img"})}),Object(u.jsx)(n.b,{to:"/".concat(t.category,"/").concat(t.itemId),className:"cart-item__item-link",children:Object(u.jsx)("p",{className:"cart-item__name",children:t.name})})]}),Object(u.jsxs)("div",{className:"cart-item__change-amount",children:[Object(u.jsx)("button",{"aria-label":"decrease amount",type:"button",className:l()("cart-item__btn cart-item__btn--min",{"cart-item__btn--min--disabled":1===_}),onClick:function(){return O(_-1)}}),Object(u.jsx)("p",{className:"cart-item__amount","data-cy":"productQauntity",children:_}),Object(u.jsx)("button",{"aria-label":"increase amount",type:"button",className:"cart-item__btn cart-item__btn--plus",onClick:function(){return O(_+1)}})]}),Object(u.jsx)("p",{className:"cart-item__price",children:"$".concat(t.price*_)})]})};c(38);function w(){var e=Object(r.p)(),t=Object(r.n)(),c=t.state,a=t.pathname.split("/")[1];return Object(u.jsxs)("button",{"aria-label":"Go back",type:"button",className:"go-back-button",onClick:function(){return e({pathname:"..",search:null===c||void 0===c?void 0:c.search})},"data-cy":"backButton",children:[Object(u.jsx)("span",{className:"go-back-button__arrow"}),"Back ".concat("cart"!==a?"to ".concat(a):"")]})}c(39);function S(){var e=Object(j.useContext)(x),t=e.addedToCart,c=e.setCartPrices,a=e.totalPrices,s=Object(j.useState)(!1),n=Object(i.a)(s,2),r=n[0],o=n[1],b=Object(j.useCallback)((function(){o(!0);var e=setTimeout((function(){return o(!1)}),4e3);return function(){return clearTimeout(e)}}),[]);return Object(j.useEffect)((function(){var e=t.map((function(e){var t=localStorage.getItem("".concat(e.phoneId,"amount"));return{phoneId:e.phoneId,price:e.price,amount:t?+t:1}}));c(e)}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{}),Object(u.jsxs)("section",{className:"cart",children:[Object(u.jsx)("h1",{className:"cart__title",children:"Cart"}),0===t.length?Object(u.jsx)("p",{className:"cart__empty",children:"Your cart is empty"}):Object(u.jsxs)("div",{className:"cart__container",children:[Object(u.jsx)("div",{className:"cart__chosen-items",children:t.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(k,{product:e})},e.phoneId)}))}),Object(u.jsxs)("div",{className:"cart__total",children:[Object(u.jsxs)("div",{className:"cart__price-container",children:[Object(u.jsx)("p",{className:"cart__price",children:"$".concat(a)}),Object(u.jsx)("p",{className:"cart__price-description",children:"Total for ".concat(t.length," items")})]}),Object(u.jsx)("button",{type:"button",className:"wide-button wide-button--high",onClick:function(){return b()},children:"Checkout"}),Object(u.jsx)("p",{className:l()("cart__message",{"cart__message--active":r}),children:"We are sorry, but this feature is not implemented yet"})]})]})]})]})}c(40);function I(){return Object(u.jsx)("div",{className:"error-page",children:"Page not found... "})}c(41);var P=function(){var e=Object(r.n)(),t="",c=e.pathname.split("/").filter((function(e){return""!==e})).map((function(e){t+="/".concat(e);var c=e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");return Object(u.jsxs)("div",{className:"breadcrumbs__crumb","data-cy":"breadCrumbs",children:[Object(u.jsx)("div",{className:"breadcrumbs__separator"}),Object(u.jsx)(n.c,{to:t,className:"breadcrumbs__link",children:c},e)]})}));return Object(u.jsxs)("div",{className:"breadcrumbs",children:[Object(u.jsx)(n.c,{to:"/home",className:"breadcrumbs__home"}),c]})},T=(c(42),function(e){var t=e.product,c=Object(j.useContext)(x),a=c.addTofavoritesHandler,s=c.addToCartHandler,r=c.addedToCart,o=c.favorites,b=Object(n.d)(),d=Object(i.a)(b,1)[0],m=r.find((function(e){return e.phoneId===t.phoneId})),p=o.find((function(e){return e.phoneId===t.phoneId}));return Object(u.jsxs)("article",{className:"product-card",children:[Object(u.jsx)("div",{className:"product-card__img-container",children:Object(u.jsx)(n.b,{to:"/".concat(t.category,"/").concat(t.itemId),state:{search:d.toString()},children:Object(u.jsx)("img",{src:t.image,alt:t.name,className:"product-card__img"})})}),Object(u.jsx)(n.b,{to:"/".concat(t.category,"/").concat(t.itemId),className:"product-card__title-link",state:{search:d.toString()},children:Object(u.jsx)("h2",{className:"product-card__title",children:t.name})}),Object(u.jsxs)("p",{className:"product-cars__prices",children:[Object(u.jsx)("span",{className:"product-card__price",children:"$".concat(t.price)}),Object(u.jsx)("span",{className:"product-card__full-price",children:"$".concat(t.fullPrice)})]}),Object(u.jsxs)("ul",{className:"product-card__list",children:[Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"Screen"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.screen})]}),Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"Capacity"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.capacity})]}),Object(u.jsxs)("li",{className:"product-card__list-item",children:[Object(u.jsx)("p",{className:"product-card__property-name",children:"RAM"}),Object(u.jsx)("p",{className:"product-card__property-value",children:t.ram})]})]}),Object(u.jsxs)("div",{className:"product-card__buttons",children:[Object(u.jsx)("button",{type:"button",className:l()("wide-button",{"wide-button--active":m}),onClick:function(){return s(t.phoneId)},children:m?"Added to Cart":"Add to cart"}),Object(u.jsx)("button",{type:"button","aria-label":"button-fav",className:l()("button button--fav",{"button--fav--chosen":p}),onClick:function(){return a(t.phoneId)},"data-cy":"addToFavorite"})]})]})}),A=(c(43),function(e){var t=e.productsList;return Object(u.jsx)("ul",{className:"product-list","data-cy":"productList",children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(T,{product:e})},e.id)}))})});function L(){var e=Object(j.useContext)(x).favorites;return Object(u.jsxs)("div",{className:"outlet",children:[Object(u.jsx)(P,{}),Object(u.jsxs)("section",{className:"outlet__content",children:[Object(u.jsx)("h1",{className:"outlet__title",children:"favorites"}),Object(u.jsx)("p",{className:"outlet__subtitle",children:"".concat(e.length," items")}),Object(u.jsx)(A,{productsList:e})]})]})}c(44);var E=[{name:"phones",url:"/phones",img:"./img/banner-phones.png"},{name:"tablets",url:"/tablets",img:"./img/banner-tablets.png"},{name:"accessories",url:"/accessories",img:"./img/banner-accessories.png"}];function R(){var e=Object(j.useState)(0),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(j.useState)(1040),r=Object(i.a)(s,2),o=r[0],b=r[1],d=Object(j.useRef)(null),m=Object(j.useRef)(null);function p(){c===E.length-1?a(0):a((function(e){return e+1}))}Object(j.useEffect)((function(){var e=function(){m.current&&b(m.current.offsetWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(j.useEffect)((function(){b(m.current?m.current.offsetWidth:0);var e=o*c;d.current&&(d.current.style.transform="translateX(-".concat(e,"px)"))}),[c,o]);var h={width:o};return Object(j.useEffect)((function(){var e=setInterval((function(){p()}),4e3);return function(){return clearInterval(e)}}),[c]),Object(u.jsxs)("div",{className:"slider",children:[Object(u.jsxs)("div",{className:"slider__top",children:[Object(u.jsx)("button",{type:"button",className:"slider__button slider__button--prev","aria-label":"prev",onClick:function(){a(0===c?E.length-1:function(e){return e-1})}}),Object(u.jsx)("div",{className:"slider__viewport",ref:m,children:Object(u.jsx)("div",{className:"slider__links",ref:d,children:E.map((function(e){return Object(u.jsx)(n.b,{className:"slider__link slider__link--".concat(e.name),style:h,to:e.url},e.name)}))})}),Object(u.jsx)("button",{type:"button",className:"slider__button slider__button--next","aria-label":"next",onClick:p})]}),Object(u.jsxs)("div",{className:"slider__dots",children:[Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":0===c}),onClick:function(){return a(0)}}),Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":1===c}),onClick:function(){return a(1)}}),Object(u.jsx)("button",{"aria-label":"dot",type:"button",className:l()("slider__dot",{"slider__dot--active":2===c}),onClick:function(){return a(2)}})]})]})}c(45);var H=function(){return Object(u.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(u.jsx)("div",{className:"Loader__content"})})},B=(c(46),function(e){var t=e.title,c=e.products,a=Object(j.useState)(0),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(j.useState)(!1),b=Object(i.a)(o,2),d=b[0],m=b[1],p=Object(j.useState)(!1),h=Object(i.a)(p,2),_=h[0],O=h[1],x=Object(j.useRef)(null);return Object(j.useEffect)((function(){0===n&&m(!0),n===c.length-1-4&&O(!0);var e=288*n;x.current&&(x.current.style.transform="translateX(-".concat(e,"px)"))}),[n]),Object(u.jsxs)("div",{className:"products-slider",children:[Object(u.jsxs)("div",{className:"products-slider__top",children:[Object(u.jsx)("h1",{className:"products-slider__title",children:t}),Object(u.jsxs)("div",{className:"products-slider__buttons",children:[Object(u.jsx)("button",{"aria-label":"prev",type:"button",className:l()("button button--prev",{"button--disabled":d}),onClick:function(){O(!1),r((function(e){return e-1}))}}),Object(u.jsx)("button",{"aria-label":"next",type:"button",className:l()("button button--next",{"button--disabled":_}),onClick:function(){m(!1),n===c.length-1-4?O(!0):r((function(e){return e+1}))}})]})]}),Object(u.jsx)("div",{className:"products-slider__viewport",children:Object(u.jsx)("div",{className:"products-slider__items",ref:x,"data-cy":"cardsContainer",children:c.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(T,{product:e})},e.id)}))})})]})});c(47);function M(){var e=Object(j.useContext)(x),t=e.products,c=e.setProducts,a=Object(j.useState)([]),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(j.useState)([]),l=Object(i.a)(o,2),b=l[0],d=l[1],m=Object(j.useState)(!1),p=Object(i.a)(m,2),h=p[0],O=p[1];return Object(j.useEffect)((function(){O(!0),_().then(c),_().then((function(e){return e.sort((function(e,t){return e.fullPrice-e.price-(t.fullPrice-t.price)}))})).then(r),_().then((function(e){return e.sort((function(e,t){return t.price-e.price}))})).then(d).finally((function(){return O(!1)}))}),[]),Object(u.jsx)("div",{className:"home-page",children:h?Object(u.jsx)(H,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("section",{className:"home-page__section",children:Object(u.jsx)(R,{})}),Object(u.jsx)("section",{className:"home-page__section hot-prices",children:Object(u.jsx)(B,{title:"Hot prices",products:n})}),Object(u.jsxs)("section",{className:"home-page__section categories",children:[Object(u.jsx)("h1",{className:"categories__title",children:"Shop by category"}),Object(u.jsxs)("div",{className:"categories__content","data-cy":"categoryLinksContainer",children:[Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/phones.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Mobile phones"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"phones"===e.category})).length," models")})]}),Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/tabs.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Tablets"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"tablets"===e.category})).length," models")})]}),Object(u.jsxs)("div",{className:"categories__category category",children:[Object(u.jsxs)("a",{href:"#/phones",className:"category__link",children:[Object(u.jsx)("img",{src:"./img/categories/accessories.jpg",width:"368px",alt:"mobile phones",className:"category__img"}),Object(u.jsx)("h2",{className:"category__title",children:"Accessories"})]}),Object(u.jsx)("p",{className:"category__subtitle",children:"".concat(t.filter((function(e){return"accessories"===e.category})).length," models")})]})]})]}),Object(u.jsx)("section",{className:"home-page__section new-models",children:Object(u.jsx)(B,{title:"Brand new models",products:b})})]})})}c(48);var F=function(e){var t=e.images,c=Object(j.useState)(t[0]),a=Object(i.a)(c,2),s=a[0],n=a[1];return Object(j.useEffect)((function(){n(t[0])}),[t]),Object(u.jsxs)("div",{className:"item-gallery",children:[Object(u.jsx)("ul",{className:"item-gallery__list",children:t.map((function(e){return Object(u.jsx)("li",{className:"item-gallery__li",children:Object(u.jsx)("button",{type:"button",onClick:function(){return n(e)},className:l()("item-gallery__previw-btn",{"item-gallery__previw-btn--active":e===s}),children:Object(u.jsx)("img",{src:"/".concat(e),alt:"product",className:"item-gallery__previw-img"})})},e)}))}),Object(u.jsx)("div",{className:"item-gallery__img-container",children:Object(u.jsx)("img",{src:s,alt:"product",className:"item-gallery__img"})})]})};c(49);function W(){var e=Object(r.r)().itemId,t=Object(j.useContext)(x),c=t.addTofavoritesHandler,a=t.addToCartHandler,s=t.addedToCart,o=t.favorites,b=Object(j.useState)(),d=Object(i.a)(b,2),m=d[0],p=d[1],O=Object(j.useState)([]),f=Object(i.a)(O,2),v=f[0],g=f[1],N=Object(j.useState)(!1),y=Object(i.a)(N,2),C=y[0],k=y[1],S=Object(j.useState)(""),I=Object(i.a)(S,2),T=I[0],A=I[1],L=Object(j.useState)(""),E=Object(i.a)(L,2),R=E[0],M=E[1],W=Object(r.n)(),$=Object(r.n)().state,D=s.find((function(t){return t.phoneId===e})),q=o.find((function(t){return t.phoneId===e}));Object(j.useEffect)((function(){var t;k(!0),(t=e,fetch("".concat(h,"/products/").concat(t,".json")).then((function(e){return e.json()})).then()).then(p).finally((function(){return k(!1)})),_().then((function(e){return e.sort((function(){return.5-Math.random()}))})).then(g)}),[e]),Object(j.useEffect)((function(){m&&(A(m.color),M(m.capacity))}),[m]);var J=function(e,t){var c=W.pathname.split("-");switch(e){case"color":c.splice(-1,1,t);break;case"capacity":c.splice(-2,1,t.toLowerCase())}return c.join("-")};return C?Object(u.jsx)(H,{}):Object(u.jsxs)("div",{className:"item-page",children:[Object(u.jsx)(P,{}),Object(u.jsx)(w,{}),m?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:"item-page__section",children:[Object(u.jsx)("h1",{className:"item-page__title",children:m.name}),Object(u.jsxs)("div",{className:"item-page__flex-container",children:[Object(u.jsx)(F,{images:m.images}),Object(u.jsxs)("div",{className:"item-page__main-info",children:[Object(u.jsxs)("div",{className:"item-page__info-container",children:[Object(u.jsxs)("div",{className:"item-page__specifications",children:[Object(u.jsxs)("div",{className:"item-page__info-block",children:[Object(u.jsx)("p",{className:"item-page__caption",children:"Available colors"}),Object(u.jsx)("ul",{className:"item-page__spec-container",children:m.colorsAvailable.map((function(e){var t="rosegold"===e?"#ffe5e4":e;return Object(u.jsx)("li",{children:Object(u.jsx)(n.b,{to:J("color",e),state:{search:null===$||void 0===$?void 0:$.search},className:l()("item-page__color",{"item-page__color--active":T===e}),title:e,style:{backgroundColor:t},onClick:function(){return A(e)}})},e)}))})]}),Object(u.jsx)("div",{className:"item-page__separator"}),Object(u.jsxs)("div",{className:"item-page__info-block",children:[Object(u.jsx)("p",{className:"item-page__caption",children:"Select capacity"}),Object(u.jsx)("ul",{className:"item-page__spec-container",children:m.capacityAvailable.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(n.b,{to:J("capacity",e),state:{search:null===$||void 0===$?void 0:$.search},className:l()("item-page__capacity",{"item-page__capacity--active":R===e}),onClick:function(){return M(e)},children:e})},e)}))})]}),Object(u.jsx)("div",{className:"item-page__separator"})]}),Object(u.jsxs)("p",{className:"item-page__price",children:["$".concat(m.priceDiscount),Object(u.jsx)("span",{className:"item-page__price--old",children:"$".concat(m.priceRegular)})]}),Object(u.jsxs)("div",{className:"item-page__add-to-cart",children:[Object(u.jsx)("button",{type:"button","aria-label":"Add to cart",className:l()("wide-button wide-button--high",{"wide-button--active":D}),onClick:function(){return a(m.id)},children:D?"Added to Cart":"Add to cart"}),Object(u.jsx)("button",{type:"button","aria-label":"Add to favorites",className:l()("button button--fav button--fav--big",{"button--fav--chosen":q}),onClick:function(){return c(m.id)},"data-cy":"addToFavorite"})]}),Object(u.jsxs)("ul",{className:"item-page__props-list",children:[Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Screen"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.screen})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Resolution"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.resolution})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"Processor"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.processor})]}),Object(u.jsxs)("li",{className:"item-page__prop-li",children:[Object(u.jsx)("p",{children:"RAM"}),Object(u.jsx)("p",{className:"item-page__prop-value",children:m.ram})]})]})]}),Object(u.jsx)("p",{className:"item-page__id",children:"ID: 802390"})]})]})]}),Object(u.jsxs)("div",{className:"item-page__flex-container",children:[Object(u.jsx)("section",{className:"item-page__section",children:Object(u.jsxs)("div",{className:"item-page__about","data-cy":"productDescription",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"item-page__section-title",children:"About"}),Object(u.jsx)("div",{className:"item-page__separator"})]}),m.description.map((function(e){return Object(u.jsxs)("article",{className:"item-page__about-article",children:[Object(u.jsx)("h3",{className:"item-page__article-title",children:e.title}),e.text.map((function(e){return Object(u.jsx)("p",{className:"item-page__article-p",children:e})}))]})}))]})}),Object(u.jsxs)("section",{className:"item-page__section",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"item-page__section-title",children:"Tech specs"}),Object(u.jsx)("div",{className:"item-page__separator"})]}),Object(u.jsxs)("ul",{className:"item-page__tech-specs",children:[Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Screen",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.screen})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Resolution",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.resolution})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Processor",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.processor})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["RAM",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.ram})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Built in memory",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.capacity})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Camera",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.camera})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Zoom",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.zoom})]}),Object(u.jsxs)("li",{className:"item-page__tech-spec",children:["Cell",Object(u.jsx)("span",{className:"item-page__tech-spec--value",children:m.cell.join(", ")})]})]})]})]})]}):Object(u.jsx)("p",{className:"item-page__not-found",children:"No products found..."}),Object(u.jsx)(B,{title:"You may also like",products:v})]})}c(50);var $,D=function(e){var t=e.label,c=e.property,a=e.searchName,s=e.setSearchWith,n=e.propertyList,r=Object(j.useRef)(null),i=Object(j.useRef)(null);return Object(u.jsxs)("div",{className:"select__wrapper",children:[Object(u.jsx)("p",{className:"select__label",children:t}),Object(u.jsx)("button",{ref:i,type:"button","aria-label":"select-button",name:"sortBy",id:"sortBy",className:"select__button",onClick:function(){var e,t;r&&(null===(e=r.current)||void 0===e||e.classList.toggle("select__dropdown--visible"));i&&(null===(t=i.current)||void 0===t||t.classList.toggle("select__button--active"))},onBlur:function(){var e,t;r&&(null===(e=r.current)||void 0===e||e.classList.remove("select__dropdown--visible"));i&&(null===(t=i.current)||void 0===t||t.classList.remove("select__button--active"))},children:c}),Object(u.jsx)("ul",{className:"select__dropdown",ref:r,children:n.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("button",{type:"button",className:"select__option",onMouseDown:function(){return s(a,e)},children:e})},e)}))})]})};c(51);!function(e){e.age="Newest",e.name="Alphabetically",e.price="Cheapest"}($||($={}));var q=[4,8,16,"all"],J=function(e){var t=e.products,c=e.setProductsCounter,a=Object(n.d)(),s=Object(i.a)(a,2),r=s[0],o=s[1],b=+(r.get("page")||1),d=r.get("sort")||$.age,p=r.get("perPage")||q[2],h=r.get("query")||"",_="all"!==p?+p*b:t.length,O="all"!==p?_-+p:1,x=function(e,t){var c=new URLSearchParams(r);c.set(e,t.toString()),o(c)};Object(j.useMemo)((function(){x("page",1)}),[p,d]);var f=Object(m.a)(t).filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})),v=function(e){var t=Object(m.a)(e);switch(d){case $.age:t.sort((function(e,t){return t.year-e.year}));break;case $.name:t.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case $.price:t.sort((function(e,t){return e.price-t.price}))}return t.slice(O,_)}(f),g=function(){var e="all"!==p?Math.ceil(f.length/+p):1,t=[1,b-1,b,b+1,e];if(1!==b&&2!==b||(t=[1,2,3,4,e]),b!==e&&b!==e-1||(t=[1,e-3,e-2,e-1,e]),e<5){t=[];for(var c=1;c<=e;c+=1)t.push(c)}return t};return Object(j.useEffect)((function(){c(f.length)}),[f]),Object(u.jsx)("div",{className:"catalog",children:0===f.length?Object(u.jsx)("p",{children:"No products found"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"catalog__filters",children:[Object(u.jsx)(D,{label:"Sort by",property:d,searchName:"sort",setSearchWith:x,propertyList:Object.values($)}),Object(u.jsx)(D,{label:"Items on page",property:p,searchName:"perPage",setSearchWith:x,propertyList:q})]}),Object(u.jsx)("div",{className:"catalog__product-list",children:Object(u.jsx)(A,{productsList:v})}),"all"!==p&&Object(u.jsxs)("div",{className:"catalog__pages-nav","data-cy":"pagination",children:[Object(u.jsx)("button",{"aria-label":"prev",type:"button",className:l()("button button--prev",{"button--disabled":1===b}),"data-cy":"paginationLeft",onClick:function(){return x("page",b-1)}}),Object(u.jsx)("div",{className:"catalog__pages-buttons",children:g().map((function(e){return Object(u.jsx)("button",{"aria-label":"page",type:"button",className:l()("catalog__page-button",{"catalog__page-button--active":e===b}),onClick:function(){return x("page",e)},children:e},e)}))}),Object(u.jsx)("button",{"aria-label":"next",type:"button",className:l()("button button--next",{"button--disabled":b===g().length}),"data-cy":"paginationRight",onClick:function(){return x("page",b+1)}})]})]})})},z=function(e){var t=e.category,c=e.title,a=Object(j.useState)([]),s=Object(i.a)(a,2),n=s[0],o=s[1],l=Object(j.useState)(n.length),b=Object(i.a)(l,2),d=b[0],m=b[1],p=Object(r.n)(),h=Object(j.useState)(!1),O=Object(i.a)(h,2),x=O[0],f=O[1];return Object(j.useEffect)((function(){f(!0),function(e){return _().then((function(t){return t.filter((function(t){return t.category===e}))}))}(t).then(o).finally((function(){return f(!1)}))}),[p.pathname]),Object(u.jsxs)("div",{className:"outlet",children:[Object(u.jsx)(P,{}),x?Object(u.jsx)(H,{}):Object(u.jsxs)("section",{className:"outlet__content",children:[Object(u.jsx)("h1",{className:"outlet__title",children:c}),Object(u.jsx)("p",{className:"outlet__subtitle",children:"".concat(d," ").concat(1===d?"model":"models")}),Object(u.jsx)("div",{className:"outlet__catalog",children:Object(u.jsx)(J,{products:n,setProductsCounter:m})})]})]})};function U(){return Object(u.jsx)(f,{children:Object(u.jsxs)(n.a,{children:[Object(u.jsx)(C,{}),Object(u.jsx)(r.d,{children:Object(u.jsxs)(r.b,{path:"/",element:Object(u.jsx)(y,{}),children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(M,{})}),Object(u.jsx)(r.b,{path:"home",element:Object(u.jsx)(M,{})}),Object(u.jsxs)(r.b,{path:"phones",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(z,{category:"phones",title:"Mobile phones"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)(W,{})})]}),Object(u.jsxs)(r.b,{path:"tablets",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(z,{category:"tablets",title:"Tablets"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)(W,{})})]}),Object(u.jsxs)(r.b,{path:"accessories",children:[Object(u.jsx)(r.b,{index:!0,element:Object(u.jsx)(z,{category:"accessories",title:"Accessories"})}),Object(u.jsx)(r.b,{path:":itemId",element:Object(u.jsx)(W,{})})]}),Object(u.jsx)(r.b,{path:"favorites",element:Object(u.jsx)(L,{})}),Object(u.jsx)(r.b,{path:"cart",element:Object(u.jsx)(S,{})}),Object(u.jsx)(r.b,{path:"*",element:Object(u.jsx)(I,{})})]})})]})})}c(52);s.a.render(Object(u.jsx)(U,{}),document.getElementById("root"))}]),[[53,1,2]]]);
//# sourceMappingURL=main.bd655a6d.chunk.js.map